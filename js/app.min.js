(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{RT:()=>R,r:()=>U,wj:()=>M,ZF:()=>T,nK:()=>D,fr:()=>j});const t=document.getElementById("toImg_inputFile-area"),n=document.getElementById("toImg_input-file"),a=document.getElementById("toImg_canvas"),l=a.getContext("2d"),o=document.getElementById("toImg_canvas-reset"),d=document.getElementById("toImg_text-to-crypto-label"),i=document.getElementById("toImg_input-text"),r=document.getElementById("toImg_crypto-key-label"),c=document.getElementById("toImg_input-key"),s=document.getElementById("toImg_key-generate"),g=document.getElementById("toImg_text-encrypt"),m=document.getElementById("toImg_canvas-download"),u=document.getElementById("toImg_canvas-copy");let h=0,y=[];function v(e){e>=1?(o.style.display="block",d.style.display="block"):(n.value="",l.clearRect(0,0,a.width,a.height),i.value="",c.value="",y.length=0,o.style.display="none",d.style.display="none"),e>=2?r.style.display="block":(r.style.display="none",c.value=""),g.style.display=e>=3?"block":"none",4==e?(m.style.display="block",u.style.display="block"):(m.style.display="none",u.style.display="none")}function p(){const e=new Image;n.files[0]&&(e.src=URL.createObjectURL(n.files[0]),e.addEventListener("load",(()=>{a.width=e.width,a.height=e.height,e.width>=D&&e.height>=T?(v(1),l.drawImage(e,0,0,a.width,a.height),h=function(e){let t=e.getImageData(0,0,a.width,a.height).data.length;return Math.floor(t/M)}(l),i.setAttribute("maxlength",h)):v(0)})))}function f(e){let t=[];for(let n=0;n<e.length;n++)n%2==0?t.push(e.charCodeAt(n)):t.push("-"+e.charCodeAt(n));return t=Math.abs(t.map((e=>Math.floor(.5*Number(e)))).reduce(((e,t)=>e+t))),t>=j?t=j:t}const I=document.getElementById("toText_inputFile-area"),E=document.getElementById("toText_input-file"),L=document.getElementById("toText_canvas"),b=L.getContext("2d"),w=document.getElementById("toText_canvas-reset"),k=document.getElementById("toText_crypto-key-label"),A=document.getElementById("toText_input-key"),B=document.getElementById("toText_key-confirm"),_=document.getElementById("toText_message");function x(e){e>=1?(w.style.display="block",k.style.display="block",A.style.display="block"):(E.value="",b.clearRect(0,0,L.width,L.height),A.value="",w.style.display="none",k.style.display="none",A.style.display="none"),B.style.display=e>=2?"block":"none",_.style.display=e>=3?"block":"none"}function C(){const e=new Image;e.src=URL.createObjectURL(E.files[0]),e.addEventListener("load",(()=>{L.width=e.width,L.height=e.height,e.width>=D&&e.height>=T?(A.value="",x(1),b.drawImage(e,0,0,L.width,L.height)):x(0)}))}const D=512,T=512,R=8,U=140,j=100,M=5e4;!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),n.onchange=p,t.addEventListener("click",(e=>{n.click()})),t.addEventListener("dragover",(e=>{e.preventDefault(),t.classList.add("drag-over")})),t.addEventListener("dragleave",(e=>{e.preventDefault(),t.classList.remove("drag-over")})),t.addEventListener("drop",(e=>{e.preventDefault(),t.classList.remove("drag-over"),n.files=e.dataTransfer.files,p()})),o.addEventListener("click",(()=>v(0))),i.addEventListener("input",(()=>{let e=i.value;e.charCodeAt(e.length-1)>U&&(i.value=e.slice(0,-1)),e.length>=5?c.value.length==R?v(3):v(2):v(1)})),c.addEventListener("input",(()=>{c.value.length==R?v(3):v(2)})),s.addEventListener("click",(()=>c.value=function(){let e="";for(let t=0;t<R;t++)e+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-!@#$%&"[Math.floor(69*Math.random())];return v(3),e}())),g.addEventListener("click",(function(){let e=f(c.value);y.length=0;let t=i.value;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n)+e;y.push(a)}const o=l.getImageData(0,0,a.width,a.height).data;let d=0;for(let e=M;e<o.length;e+=M)d<y.length?(o[e+3]=y[d],d++):o[e+3]<125?o[e+3]=0:o[e+3]=255;const r=new ImageData(new Uint8ClampedArray(o),a.width,a.height);l.putImageData(r,0,0),v(4),m.href=a.toDataURL(),m.download=n.files[0].name})),u.addEventListener("click",(function(){a.toBlob((function(e){const t=new ClipboardItem({"image/png":e});navigator.clipboard.write([t]).then((()=>alert("Image copied to clipboard!"))).catch((function(e){console.error("Error:",e)}))}),"image/png")})),E.onchange=C,I.addEventListener("click",(e=>{E.click()})),I.addEventListener("dragover",(e=>{e.preventDefault(),I.classList.add("drag-over")})),I.addEventListener("dragleave",(e=>{e.preventDefault(),I.classList.remove("drag-over")})),I.addEventListener("drop",(e=>{e.preventDefault(),I.classList.remove("drag-over"),E.files=e.dataTransfer.files,C()})),w.addEventListener("click",(()=>x(0))),A.addEventListener("input",(()=>{A.value.length==R?x(2):x(1)})),B.addEventListener("click",(()=>{_.innerHTML="",_.textContent=function(){let e=f(A.value);const t=b.getImageData(0,0,L.width,L.height).data;let n=[];for(let a=M;a<t.length;a+=M){let l=t[a+3]-e;l>0&&l<U&&n.push(l)}return n.map((e=>String.fromCharCode(e))).join("")}(),x(3)}))})();