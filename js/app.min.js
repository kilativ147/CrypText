(()=>{"use strict";const e=document.getElementById("burger-button"),t=document.getElementById("header-menu"),n=e.className,s=t.className;function c(c="toggle"){console.log("🚀 | file: burger.js:10 | burgerClick | action:",c),e.classList.toggle(`${n}--active`),t.classList.toggle(`${s}--active`),document.body.classList.toggle("body--lock"),"remove"===c&&(e.classList.remove(`${n}--active`),t.classList.remove(`${s}--active`),document.body.classList.remove("body--lock"))}e.addEventListener("click",c);const o=document.getElementById("nav-logo"),a=document.getElementById("nav-how"),i=document.getElementById("nav-why"),d=document.getElementById("nav-try"),l=document.getElementById("greatings"),r=document.getElementById("how"),u=document.getElementById("why"),m=document.getElementById("try");function p(t){e.className===`${n} ${n}--active`&&c("remove"),console.log("🚀 | file: nav.js:24 | goTo | burgerButton.className:",e.className);const s=t.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:s,behavior:"smooth"})}o.addEventListener("click",(()=>p(l))),a.addEventListener("click",(()=>p(r))),i.addEventListener("click",(()=>p(u))),d.addEventListener("click",(()=>p(m))),document.querySelectorAll(".button__try").forEach((e=>{e.addEventListener("click",(()=>p(m)))}));let g=0;const y="canvas--visible",v="Make sure you have entered the information that meets the requirements",h="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_!#$&?|:";let L="";const E=127;for(let e=32;e<E;e++)L+=String.fromCharCode(e);let f=[];function I(e,t="enc"){0==e&&(x.value="",U.clearRect(0,0,D.width,D.height),q.value="",Y.value="",Y.type="password",f.length=0,D.classList.remove(y),T.classList.remove("option--visible"),$.classList.remove("inputs--visible"),z.classList.remove("result--visible"),M.classList.remove("inputs--decrypt"),P.classList.remove("inputs--decrypt"),J.classList.remove("inputs--decrypt"),ee.classList.remove("inputs--decrypt"),V.classList.remove("inputs--decrypt"),X.classList.remove("inputs--encrypt"),F.classList.remove("result--decrypt"),K.type="password",ce.classList.remove("result--encrypt")),1==e&&T.classList.add("option--visible"),2==e&&($.classList.add("inputs--visible"),"enc"==t?X.classList.add("inputs--encrypt"):(M.classList.add("inputs--decrypt"),P.classList.add("inputs--decrypt"),J.classList.add("inputs--decrypt"),ee.classList.add("inputs--decrypt"),V.classList.add("inputs--decrypt"))),3==e&&(z.classList.add("result--visible"),"enc"==t?(K.value=Y.value,ce.classList.add("result--encrypt")):(oe.innerText=function(){let e=_(Y.value);const t=U.getImageData(0,0,D.width,D.height).data;let n=[];for(let s=pe;s<t.length;s+=pe){let c=255-t[s+3]-e;c>0&&c<E&&n.push(c)}return n.map((e=>String.fromCharCode(e))).join("")}(),F.classList.add("result--decrypt")))}function b(){if(!x.files[0])return;const e=new Image;e.src=URL.createObjectURL(x.files[0]),e.addEventListener("load",(()=>{if(D.width=e.width,D.height=e.height,e.width>=ae&&e.height>=ie){I(1),D.classList.add(y),U.drawImage(e,0,0,D.width,D.height);let t=U.getImageData(0,0,D.width,D.height).data.length;g=Math.floor(t/pe),q.setAttribute("maxlength",g),B()}else I(0)}))}function B(){const e=q.value.length,t=g;O.innerHTML=`(${e} / ${t})`}function k(e){e.length==le?Y.classList.add("inputs__key-input--success"):Y.classList.remove("inputs__key-input--success")}function w(e){const t="enc"==e?q.value:"",n="enc"!=e||t.length>=de,s=Y.value,c=8==s.length;let o=!0;for(let e=0;e<t.length;e++)if(-1===L.indexOf(t[e])){o=!1;break}let a=!0;for(let e=0;e<s.length;e++)if(-1===h.indexOf(s[e])){a=!1;break}"enc"==e?(n&&o||(j.classList.add(ue),setTimeout((()=>{j.classList.remove(ue)}),re)),c&&a||(W.classList.add(ue),setTimeout((()=>{W.classList.remove(ue)}),re)),n&&o&&c&&a?function(){let e=_(Y.value);f.length=0;let t=q.value;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n)+e;f.push(s)}const n=U.getImageData(0,0,D.width,D.height).data;let s=0;for(let e=pe;e<n.length;e+=pe)s<f.length?(n[e+3]=255-f[s],s++):n[e+3]<125?n[e+3]=0:n[e+3]=255;const c=new ImageData(new Uint8ClampedArray(n),D.width,D.height);U.putImageData(c,0,0),I(3),te.href=D.toDataURL(),te.download=x.files[0].name}():A(v,!1)):(c&&a||(W.classList.add(ue),setTimeout((()=>{W.classList.remove(ue)}),re)),c&&a?I(3,"dec"):A(v,!1))}function _(e){let t=[];for(let n=0;n<e.length;n++)n%2==0?t.push(e.charCodeAt(n)):t.push("-"+e.charCodeAt(n));return t=Math.abs(t.map((e=>Math.floor(.5*Number(e)))).reduce(((e,t)=>e+t))),t>=me?t=me:t}function A(e,t=!1){const n=document.createElement("div");n.className="encryption__pop-up pop-up";var s=document.createElement("span");s.className=t?"pop-up__message":"pop-up__message-error",s.textContent=e,n.appendChild(s);var c=document.querySelector("div.encryption__inner");c.appendChild(n),setTimeout((function(){c.removeChild(n)}),1e4)}const C=document.getElementById("drop-area"),x=document.getElementById("input-file"),T=document.getElementById("option-main"),D=document.getElementById("canvas"),U=D.getContext("2d"),N=document.getElementById("button-option__encrypt"),R=document.getElementById("button-option__decrypt"),S=document.querySelectorAll(".encryption__reset"),$=document.getElementById("inputs-main"),M=document.getElementById("inputs__text"),j=document.getElementById("text-tooltip"),q=document.getElementById("input-text"),O=document.getElementById("entered-cherecter"),P=(document.getElementById("inputs__key"),document.getElementById("input-key-text-span")),W=document.getElementById("key-tooltip"),Y=document.getElementById("input-key"),G=document.getElementById("input-key-show"),H=document.getElementById("input-key-indicator"),J=document.getElementById("key-generate"),Q=document.getElementById("key-paste"),V=document.getElementById("text-encrypt"),X=document.getElementById("text-decrypt"),z=document.getElementById("result-main"),F=document.getElementById("result-enc"),K=document.getElementById("result-key"),Z=document.getElementById("result-key-show"),ee=document.getElementById("key-copy"),te=document.getElementById("canvas-download"),ne=document.getElementById("canvas-clipboard"),se=document.getElementById("canvas-share"),ce=document.getElementById("result-dec"),oe=document.getElementById("decrypted-message"),ae=512,ie=512,de=5,le=8,re=2e3,ue="inputs-tooltip--animate",me=100,pe=5e4;C.addEventListener("dragover",(e=>{e.preventDefault(),C.classList.add("drag-over")})),C.addEventListener("dragleave",(e=>{e.preventDefault(),C.classList.remove("drag-over")})),C.addEventListener("drop",(e=>{e.preventDefault(),C.classList.remove("drag-over"),x.files=e.dataTransfer.files,b()})),x.onchange=b,N.addEventListener("click",(()=>I(2,"enc"))),R.addEventListener("click",(()=>I(2,"dec"))),S.forEach((function(e){e.addEventListener("click",(()=>I(0)))})),q.addEventListener("input",B),Y.addEventListener("input",(()=>k(Y.value))),G.addEventListener("click",(()=>{Y.type="password"===Y.type?"text":"password",H.classList.toggle("inputs__key-hidden--visible")})),J.addEventListener("click",(()=>Y.value=function(){let e="";for(let t=0;t<le;t++){let t=Math.floor(71*Math.random());e+=h[t]}return k(e),e}())),Q.addEventListener("click",(function(){navigator.clipboard.readText().then((e=>{Y.value=e.slice(0,8),A("The key has been successfully pasted from the clipboard!",!0),k(Y.value)})).catch((e=>console.error("Unable to paste from clipboard: "+e)))})),ee.addEventListener("click",(function(){let e=Y.value;navigator.clipboard.writeText(e).then((()=>A("The security key is copied to the clipboard",!0))).catch((e=>alert("Помилка копіювання: "+e)))})),V.addEventListener("click",(()=>w("enc"))),X.addEventListener("click",(()=>w("dec"))),Z.addEventListener("click",(()=>{K.type="password"===K.type?"text":"password",Z.classList.toggle("result__key-show--visible")})),ne.addEventListener("click",(function(){D.toBlob((function(e){const t=new ClipboardItem({"image/png":e});navigator.clipboard.write([t]).then((()=>A("The image is copied to the clipboard",!0))).catch((function(e){console.error("Error:",e)}))}),"image/png")})),se.addEventListener("click",(function(){if(navigator.share)navigator.share({title:"Share the picture",url:te.href}).catch((()=>A("Unfortunately, an error has occurred or this feature is not yet supported",!1)));else{const e="https://yourwebsite.com/share?url="+encodeURIComponent(imageElement.src);window.open(e,"_blank")}})),function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}()})();