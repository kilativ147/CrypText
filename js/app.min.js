(()=>{"use strict";!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t),console.log(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}();const e=document.getElementById("input-file"),t=document.getElementById("canvas1"),n=t.getContext("2d");let l;const o=document.getElementById("canvas-reset"),a=document.getElementById("text-to-crypto-label"),d=document.getElementById("input-text"),c=document.getElementById("crypto-key-label"),i=document.getElementById("input-key"),s=document.getElementById("key-generate"),r=document.getElementById("text-encrypt"),g=document.getElementById("canvas-download"),h=document.getElementById("canvas-copy");let m,u=[];function y(s){s>=1?(o.style.display="block",a.style.display="block"):(e.value="",n.clearRect(0,0,t.width,t.height),d.value="",i.value="",u.length=0,o.style.display="none",a.style.display="none"),s>=2?c.style.display="block":(c.style.display="none",i.value=""),r.style.display=s>=3?"block":"none",4==s?(g.style.display="block",h.style.display="block",function(o){const a=l.data;let d=a.length,c=Math.floor(d/m),i=0;for(let e=0;e<a.length;e+=c)a[e+3]=o[i],i++;const s=new ImageData(new Uint8ClampedArray(a),t.width,t.height);n.putImageData(s,0,0),g.href=t.toDataURL(),g.download=e.files[0].name}(u)):(g.style.display="none",h.style.display="none")}o.addEventListener("click",(()=>y(0))),d.addEventListener("input",(()=>{d.value.length>=5?y(2):y(1)})),i.addEventListener("input",(()=>{8==i.value.length?y(3):y(2)})),s.addEventListener("click",(()=>{i.value=function(e){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-!@#$%&*";let n="",l=!1,o=d.value.length+100;do{const e=48,t=123;let a=Math.floor(Math.random()*(t-e+1))+e,d=o-a;d>e&&d<t&&(l=!0,n+=String.fromCharCode(a)+String.fromCharCode(d))}while(!l);for(let e=0;e<6;e++)n+=t[Math.floor(71*Math.random())];return console.log(n),y(3),n}()})),r.addEventListener("click",(()=>function(e){let t=e.slice(2),n=[];for(let e=0;e<t.length;e++)e%2==0?n.push(t.charCodeAt(e)):n.push("-"+t.charCodeAt(e));n=Math.abs(n.map((e=>Math.floor(.5*Number(e)))).reduce(((e,t)=>e+t))),n>=100&&(n=100),u.length=0;let l=d.value;for(let e=0;e<l.length;e++){let t=l.charCodeAt(e)+n;u.push(t)}m=u.length,y(4)}(i.value))),h.addEventListener("click",(()=>{t.toBlob((function(e){const t=new ClipboardItem({"image/png":e});navigator.clipboard.write([t]).then((function(){alert("Image copied to clipboard!")})).catch((function(e){console.error("Error:",e)}))}),"image/png")})),e.onchange=()=>{const o=new Image;o.src=URL.createObjectURL(e.files[0]),o.addEventListener("load",(()=>{t.width=o.width,t.height=o.height,o.width>=512&&o.height>=512?(y(1),n.drawImage(o,0,0,t.width,t.height),l=n.getImageData(0,0,t.width,t.height)):y(0)}))}})();