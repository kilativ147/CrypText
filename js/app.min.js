(()=>{"use strict";!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}();const e=document.getElementById("toImg_input-file"),t=document.getElementById("toImg_canvas"),n=t.getContext("2d");let o;const l=document.getElementById("toImg_canvas-reset"),a=document.getElementById("toImg_text-to-crypto-label"),d=document.getElementById("toImg_input-text"),c=document.getElementById("toImg_crypto-key-label"),i=document.getElementById("toImg_input-key"),g=document.getElementById("toImg_key-generate"),s=document.getElementById("toImg_text-encrypt"),r=document.getElementById("toImg_canvas-download"),m=document.getElementById("toImg_canvas-copy");let h,u=[];function y(g){g>=1?(l.style.display="block",a.style.display="block"):(e.value="",n.clearRect(0,0,t.width,t.height),d.value="",i.value="",u.length=0,l.style.display="none",a.style.display="none"),g>=2?c.style.display="block":(c.style.display="none",i.value=""),s.style.display=g>=3?"block":"none",4==g?(r.style.display="block",m.style.display="block",function(l){console.log(l);const a=o.data;let d=a.length,c=Math.floor(d/h),i=0;for(let e=0;e<a.length;e+=c)a[e+3]=l[i],i++;const g=new ImageData(new Uint8ClampedArray(a),t.width,t.height);n.putImageData(g,0,0),r.href=t.toDataURL(),r.download=e.files[0].name}(u)):(r.style.display="none",m.style.display="none")}l.addEventListener("click",(()=>y(0))),d.addEventListener("input",(()=>{let e=d.value;e.charCodeAt(e.length-1)>150&&(d.value=e.slice(0,-1),console.log("Недопустимий символ!")),d.value.length>=5?y(2):y(1)})),i.addEventListener("input",(()=>{8==i.value.length?y(3):y(2)})),g.addEventListener("click",(()=>{i.value=function(e){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-!@#$%&*";let n="",o=!1,l=d.value.length+100;do{const e=48,t=123;let a=Math.floor(Math.random()*(t-e+1))+e,d=l-a;d>e&&d<t&&(o=!0,n+=String.fromCharCode(a)+String.fromCharCode(d))}while(!o);for(let e=0;e<6;e++)n+=t[Math.floor(71*Math.random())];return console.log(n),y(3),n}()})),s.addEventListener("click",(()=>function(e){let t=e.slice(2),n=[];for(let e=0;e<t.length;e++)e%2==0?n.push(t.charCodeAt(e)):n.push("-"+t.charCodeAt(e));n=Math.abs(n.map((e=>Math.floor(.5*Number(e)))).reduce(((e,t)=>e+t))),n>=100&&(n=100),u.length=0;let o=d.value;for(let e=0;e<o.length;e++){let t=o.charCodeAt(e)+n;u.push(t)}h=u.length,y(4)}(i.value))),m.addEventListener("click",(()=>{t.toBlob((function(e){const t=new ClipboardItem({"image/png":e});navigator.clipboard.write([t]).then((function(){alert("Image copied to clipboard!")})).catch((function(e){console.error("Error:",e)}))}),"image/png")})),e.onchange=()=>{const l=new Image;l.src=URL.createObjectURL(e.files[0]),l.addEventListener("load",(()=>{t.width=l.width,t.height=l.height,l.width>=512&&l.height>=512?(y(1),n.drawImage(l,0,0,t.width,t.height),o=n.getImageData(0,0,t.width,t.height)):y(0)}))}})();