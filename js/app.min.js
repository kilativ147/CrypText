(()=>{"use strict";const e=document.getElementById("burger-button"),t=document.getElementById("header-menu"),n=e.className,s=t.className;e.addEventListener("click",(function(){e.classList.toggle(`${n}--active`),t.classList.toggle(`${s}--active`),document.body.classList.toggle("body--lock")}));const i=document.getElementById("drop-area"),c=document.getElementById("input-file"),d=document.getElementById("option-main"),l=document.getElementById("canvas"),a=l.getContext("2d"),o=document.getElementById("button-option__encrypt"),r=document.getElementById("button-option__decrypt"),u=document.querySelectorAll(".encryption__reset"),m=document.getElementById("inputs-main"),p=document.getElementById("inputs__text"),g=(document.getElementById("text-tooltip"),document.getElementById("input-text")),y=(document.getElementById("inputs__key"),document.getElementById("input-key-text-span")),v=(document.getElementById("key-tooltip"),document.getElementById("input-key")),L=document.getElementById("key-generate"),E=document.getElementById("key-copy"),h=document.getElementById("text-encrypt"),I=document.getElementById("text-decrypt"),B=document.getElementById("result-main"),f=document.getElementById("result-enc"),_=document.getElementById("result-key"),b=(document.getElementById("canvas-download"),document.getElementById("canvas-clipboard")),k=document.getElementById("result-dec"),x=document.getElementById("decrypted-message");let w=0,T="",D=[];function A(e){0==e&&(c.value="",a.clearRect(0,0,l.width,l.height),g.value="",v.value="",D.length=0,d.classList.remove("option--visible"),m.classList.remove("inputs--visible"),B.classList.remove("result--visible"),p.classList.remove("inputs--decrypt"),y.classList.remove("inputs--decrypt"),L.classList.remove("inputs--decrypt"),E.classList.remove("inputs--decrypt"),h.classList.remove("inputs--decrypt"),I.classList.remove("inputs--encrypt"),f.classList.remove("result--decrypt"),k.classList.remove("result--encrypt")),1==e&&d.classList.add("option--visible"),2==e&&(m.classList.add("inputs--visible"),(T="enc")?I.classList.add("inputs--encrypt"):(p.classList.add("inputs--decrypt"),y.classList.add("inputs--decrypt"),L.classList.add("inputs--decrypt"),E.classList.add("inputs--decrypt"),h.classList.add("inputs--decrypt"))),3==e&&(B.classList.add("result--visible"),"enc"==T?(_.value=v.value,k.classList.add("result--encrypt")):(x.innerText="Some shit",f.classList.add("result--decrypt")))}function C(){const e=new Image;c.files[0]&&(e.src=URL.createObjectURL(c.files[0]),e.addEventListener("load",(()=>{l.width=e.width,l.height=e.height,e.width>=512&&e.height>=512?(A(1),setTimeout((function(){a.drawImage(e,0,0,l.width,l.height),w=function(e){let t=e.getImageData(0,0,l.width,l.height).data.length;return Math.floor(t/5e4)}(a),g.setAttribute("maxlength",w)}),1e3)):A(0)})))}T="dec",A(3),i.addEventListener("dragover",(e=>{e.preventDefault(),i.classList.add("drag-over")})),i.addEventListener("dragleave",(e=>{e.preventDefault(),i.classList.remove("drag-over")})),i.addEventListener("drop",(e=>{e.preventDefault(),i.classList.remove("drag-over"),c.files=e.dataTransfer.files,C()})),c.onchange=C,o.addEventListener("click",(()=>{T="enc",A(2)})),r.addEventListener("click",(()=>{T="dec",A(2)})),u.forEach((function(e){e.addEventListener("click",(function(){A(0)}))})),g.addEventListener("input",(()=>{let e=g.value;e.charCodeAt(e.length-1)>140&&(g.value=e.slice(0,-1))})),v.addEventListener("input",(()=>{8==v.value.length?v.classList.add("inputs__key-input--success"):v.classList.remove("inputs__key-input--success")})),L.addEventListener("click",(()=>{v.classList.add("inputs__key-input--success"),v.value=function(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-!@#$%&";let t="";for(let n=0;n<8;n++)t+=e[Math.floor(69*Math.random())];return t}()})),E.addEventListener("click",(()=>function(){let e=v.value;navigator.clipboard.writeText(e).then((()=>{alert("Текст скопійовано в буфер обміну: "+e)})).catch((e=>{console.error("Помилка копіювання: ",e)}))}())),h.addEventListener("click",function(e){if(g.value.length<5){const e=document.querySelector("inputs__text-tooltip");console.log(e),e.classList.add("inputs__text-tooltip--animate"),setTimeout((()=>{e.classList.remove("inputs__text-tooltip--animate")}),3e3)}}()),b.addEventListener("click",(function(){l.toBlob((function(e){const t=new ClipboardItem({"image/png":e});navigator.clipboard.write([t]).then((()=>alert("Image copied to clipboard!"))).catch((function(e){console.error("Error:",e)}))}),"image/png")}))})();